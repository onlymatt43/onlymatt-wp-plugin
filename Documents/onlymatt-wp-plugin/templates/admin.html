<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ONLYMATT AI Admin</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="<?php echo plugin_dir_url(__FILE__); ?>../assets/css/admin.css">
</head>
<body>
    <div class="container-fluid mt-4">
        <div class="row">
            <div class="col-12">
                <h1 class="mb-4">ONLYMATT AI Admin Panel</h1>

                <!-- Navigation Tabs -->
                <ul class="nav nav-tabs" id="adminTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="chat-tab" data-bs-toggle="tab" data-bs-target="#chat" type="button" role="tab">Chat</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="memory-tab" data-bs-toggle="tab" data-bs-target="#memory" type="button" role="tab">Memory</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="tasks-tab" data-bs-toggle="tab" data-bs-target="#tasks" type="button" role="tab">Tasks</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="reports-tab" data-bs-toggle="tab" data-bs-target="#reports" type="button" role="tab">Reports</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="analysis-tab" data-bs-toggle="tab" data-bs-target="#analysis" type="button" role="tab">Analysis</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="settings-tab" data-bs-toggle="tab" data-bs-target="#settings" type="button" role="tab">Settings</button>
                    </li>
                </ul>

                <!-- Tab Content -->
                <div class="tab-content mt-4" id="adminTabContent">
                    <!-- Chat Tab -->
                    <div class="tab-pane fade show active" id="chat" role="tabpanel">
                        <div class="card">
                            <div class="card-header">
                                <h5>AI Chat Interface</h5>
                            </div>
                            <div class="card-body">
                                <div id="onlymatt-chat-messages" class="chat-messages mb-3">
                                    <div class="onlymatt-message onlymatt-assistant-message">
                                        Hello! I'm your AI assistant. How can I help you today?
                                    </div>
                                </div>
                                <div id="onlymatt-typing" class="typing-indicator" style="display: none;">
                                    AI is typing...
                                </div>
                                <div class="input-group">
                                    <input type="text" id="onlymatt-chat-input" class="form-control" placeholder="Type your message...">
                                    <button class="btn btn-primary" id="onlymatt-send-message">Send</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Memory Tab -->
                    <div class="tab-pane fade" id="memory" role="tabpanel">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5>Memory Management</h5>
                                <button class="btn btn-danger btn-sm" id="onlymatt-clear-memory">Clear All Memory</button>
                            </div>
                            <div class="card-body">
                                <div class="row mb-3">
                                    <div class="col-md-4">
                                        <input type="text" id="onlymatt-memory-key" class="form-control" placeholder="Memory Key">
                                    </div>
                                    <div class="col-md-6">
                                        <input type="text" id="onlymatt-memory-value" class="form-control" placeholder="Memory Value">
                                    </div>
                                    <div class="col-md-2">
                                        <button class="btn btn-success w-100" id="onlymatt-add-memory">Add</button>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Key</th>
                                                <th>Value</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="onlymatt-memory-list">
                                            <tr>
                                                <td colspan="3">Loading memory items...</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tasks Tab -->
                    <div class="tab-pane fade" id="tasks" role="tabpanel">
                        <div class="card">
                            <div class="card-header">
                                <h5>Task Management</h5>
                            </div>
                            <div class="card-body">
                                <div class="row mb-3">
                                    <div class="col-md-4">
                                        <input type="text" id="onlymatt-task-title" class="form-control" placeholder="Task Title">
                                    </div>
                                    <div class="col-md-6">
                                        <input type="text" id="onlymatt-task-description" class="form-control" placeholder="Task Description (optional)">
                                    </div>
                                    <div class="col-md-2">
                                        <button class="btn btn-success w-100" id="onlymatt-add-task">Add Task</button>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Title</th>
                                                <th>Description</th>
                                                <th>Status</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="onlymatt-tasks-list">
                                            <tr>
                                                <td colspan="4">Loading tasks...</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Reports Tab -->
                    <div class="tab-pane fade" id="reports" role="tabpanel">
                        <div class="card">
                            <div class="card-header">
                                <h5>Report Generation</h5>
                            </div>
                            <div class="card-body">
                                <div class="row mb-3">
                                    <div class="col-md-4">
                                        <select id="onlymatt-report-type" class="form-select">
                                            <option value="usage">Usage Report</option>
                                            <option value="performance">Performance Report</option>
                                            <option value="memory">Memory Report</option>
                                            <option value="tasks">Tasks Report</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2">
                                        <button class="btn btn-primary" id="onlymatt-generate-report">Generate</button>
                                    </div>
                                </div>
                                <div id="onlymatt-report-content" class="mb-4 p-3 bg-light rounded">
                                    <p class="text-muted">Select a report type and click Generate to view results.</p>
                                </div>
                                <h6>Previous Reports</h6>
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Type</th>
                                                <th>Created</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="onlymatt-reports-list">
                                            <tr>
                                                <td colspan="3">Loading reports...</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Analysis Tab -->
                    <div class="tab-pane fade" id="analysis" role="tabpanel">
                        <div class="card">
                            <div class="card-header">
                                <h5>Data Analysis</h5>
                            </div>
                            <div class="card-body">
                                <div class="row mb-3">
                                    <div class="col-md-4">
                                        <select id="onlymatt-analysis-type" class="form-select">
                                            <option value="conversations">Conversation Analysis</option>
                                            <option value="memory_usage">Memory Usage Analysis</option>
                                            <option value="task_completion">Task Completion Analysis</option>
                                            <option value="performance">Performance Analysis</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2">
                                        <button class="btn btn-primary" id="onlymatt-run-analysis">Run Analysis</button>
                                    </div>
                                </div>
                                <div id="onlymatt-analysis-results" class="p-3 bg-light rounded">
                                    <p class="text-muted">Select an analysis type and click Run Analysis to view results.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Settings Tab -->
                    <div class="tab-pane fade" id="settings" role="tabpanel">
                        <div class="card">
                            <div class="card-header">
                                <h5>Plugin Settings</h5>
                            </div>
                            <div class="card-body">
                                <form id="onlymatt-settings-form">
                                    <div class="mb-3">
                                        <label for="onlymatt-api-url" class="form-label">API Gateway URL</label>
                                        <input type="url" class="form-control" id="onlymatt-api-url"
                                               value="<?php echo esc_attr(get_option('onlymatt_api_url', '')); ?>"
                                               placeholder="https://your-gateway.onrender.com">
                                        <div class="form-text">URL of your ONLYMATT AI Gateway deployment</div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="onlymatt-api-key" class="form-label">API Key (Optional)</label>
                                        <input type="password" class="form-control" id="onlymatt-api-key"
                                               value="<?php echo esc_attr(get_option('onlymatt_api_key', '')); ?>">
                                        <div class="form-text">API key for authentication (if required)</div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="onlymatt-max-memory" class="form-label">Max Memory Items</label>
                                        <input type="number" class="form-control" id="onlymatt-max-memory"
                                               value="<?php echo esc_attr(get_option('onlymatt_max_memory', '100')); ?>"
                                               min="10" max="1000">
                                        <div class="form-text">Maximum number of memory items to store</div>
                                    </div>
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="onlymatt-enable-logging"
                                               <?php checked(get_option('onlymatt_enable_logging', '1'), '1'); ?>>
                                        <label class="form-check-label" for="onlymatt-enable-logging">
                                            Enable Debug Logging
                                        </label>
                                    </div>
                                    <button type="button" class="btn btn-primary" id="onlymatt-save-settings">Save Settings</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Variables will be injected by wp_localize_script in the plugin
    </script>
    <script src="<?php echo plugin_dir_url(__FILE__); ?>../assets/js/admin.js"></script>
</body>
</html>